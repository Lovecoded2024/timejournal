# 时光手记 (TimeJournal) 产品设计文档

**创建日期**: 2026-02-11  
**版本**: v0.1  
**状态**: 概念设计阶段

---

## 1. 产品定位

**一句话描述**: AI 驱动的个人传记创作平台，通过多模态资料解析和深度语音/文字访谈，帮助用户记录并生成一本完整的电子书传记。

**目标用户**:
- **主要用户**: 想为父母/长辈记录人生的子女（送礼场景驱动）
- **次要用户**: 人生关键节点想留档的中青年（自用场景）

**核心差异化**:
1. **多模态理解** — 照片、手写、语音都能被 AI 理解并挖掘故事
2. **实时语音访谈** — MiniMax 低延迟 TTS 实现"打电话聊人生"的沉浸体验
3. **渐进式成书** — 不是一次性填表，而是多轮对话逐步完善

---

## 2. 技术栈

| 模块 | 技术选型 | 说明 |
|------|----------|------|
| LLM/多模态 | MiniMax | 文本理解、图片理解、语音合成 |
| 实时语音 | MiniMax TTS + ASR | 低延迟对话体验 |
| 持久化存储 | 待定 | 记忆库、用户数据、项目状态 |
| 前端 | 待定 | Web/Mobile App |
| 后端 | 待定 | API 服务、任务调度 |

---

## 3. 核心用户流程

### Step 1: 创建传记项目
- 填写基础信息：传主姓名、出生年月、出生地
- 选择传记类型：为自己 / 为家人（影响语气和提问风格）
- 设置项目目标（可选）：如"送给父亲 70 岁生日的礼物"

### Step 2: 上传资料
支持格式不限：
- 照片（老照片、生活照）
- 手写扫描（日记、信件）
- 语音备忘录
- 已有文字片段

**AI 自动处理**:
- 图片 → OCR 文字提取 + 视觉内容识别（人物、场景、时间线索）
- 语音 → 转文字
- 所有内容 → 时间线草稿 + 标签分类

### Step 3: 智能预研（后台静默处理）
AI 分析所有资料，生成：
- **人生时间线草稿** — 已知事件按时间排序
- **人物关系图谱** — 照片中反复出现的人
- **待确认清单** — 模糊的时间、缺失的上下文
- **访谈策略** — 各章节重点挖掘方向

### Step 4: 深度访谈（核心体验）
- 分多轮进行，每轮 20-40 分钟
- 支持文字或语音模式
- 按主题推进：童年 → 求学 → 工作 → 家庭 → 退休/展望

**AI 开场白示例**:
> "我看到你上传了一张 1985 年的全家福，照片里有 5 个人，能跟我讲讲当时的情况吗？"

### Step 5: 电子书生成与交付
**成书触发**:
- 用户主动点击"生成初稿"
- 或所有章节访谈完成度 > 80%

**内容组装**:
1. 章节重组 — 按叙事逻辑编排
2. 故事润色 — 口语转传记文字，保留原话引语
3. 视觉融合 — 照片智能插入并生成说明
4. 风格统一 — 根据传记类型调整语气

**输出格式**:
- EPUB（默认，手机/平板阅读）
- PDF（打印实体书）
- 精美排版版（送礼用）

**迭代机制**:
- 用户提出修改意见
- AI 针对性补充访谈或调整文字
- 支持多轮精修

---

## 4. AI 访谈引擎设计

### 4.1 访谈会话结构
```
Session {
  主题章节: "大学时光",
  目标: "确认时间线 + 挖掘2-3个有情感价值的故事",
  已聊内容: [...],
  待问问题队列: [...],
  发现的新线索: [...]
}
```

### 4.2 AI 提问策略

**1. 锚定式开场**
用具体资料切入：
> "你上传的那张毕业照，后面写着 1990 年，那天发生了什么？"

**2. 漏斗式深挖**
- 事实 → "当时你在哪个城市？"
- 细节 → "宿舍里住了几个人？"
- 情感 → "和室友关系怎么样？"
- 意义 → "那段经历对你后来的人生有什么影响？"

**3. 空白补全**
主动追问时间线缺口：
> "1988-1990 这段时间照片比较少，能聊聊那两年吗？"

**4. 故事识别**
当用户提到有张力的情节，标记为"高光故事"，后续扩展成章。

### 4.3 记忆管理（持久化设计）

访谈是异步、持续的，可能拖几周，记忆必须持久化：

```
BiographyMemory {
  项目ID: "proj_xxx",
  
  // 已确认的事实库（结构化，可查询）
  confirmed_facts: [
    {类型: "时间", 内容: "1985年进入XX大学", 来源: "第3轮访谈", 置信度: 0.95},
    {类型: "人物", 内容: "室友张三，后来去了深圳", 来源: "照片+口述", 置信度: 0.8}
  ],
  
  // 时间线草稿（持续更新）
  timeline_draft: [...],
  
  // 待确认/待追问清单
  pending_questions: [
    {问题: "1988年暑假具体去了哪里？", 优先级: "高", 关联章节: "大学时光"},
    {问题: "照片中那个穿红衣服的人是谁？", 优先级: "中", 关联照片: "img_003"}
  ],
  
  // 故事候选池（待扩展）
  story_candidates: [
    {标题: "第一次坐火车去上大学", 状态: "待深挖", 相关访谈: ["session_005"]}
  ],
  
  // 会话历史摘要（用于快速恢复上下文）
  session_summaries: [
    {轮次: 5, 日期: "2026-02-10", 主题: "大学时光", 关键进展: "确认了4个时间点，发现1个新故事"}
  ]
}
```

**上下文恢复**:
- AI 加载 `session_summaries` 快速了解"上次聊到哪了"
- 自动检查 `pending_questions` 中是否有用户已回答的
- 开场白示例：
> "上次我们聊到你在大学的第一学期，你说想回去找找当时的日记，找到了吗？"

### 4.4 语音 vs 文字模式

| 模式 | 特点 | 适用场景 |
|------|------|----------|
| 文字 | 随时暂停、编辑、补充资料 | 碎片化时间、不善表达者 |
| 语音 | 更像真实采访，自然停顿和语气词 | 沉浸式体验、长辈用户 |

---

## 5. 待决策事项

- [ ] 前端技术选型（Web App / 小程序 / 原生 App）
- [ ] 后端框架选择
- [ ] 数据库选型（关系型 + 向量数据库）
- [ ] 用户认证方案
- [ ] 定价策略（免费试用 + 付费成书？订阅制？）
- [ ] MiniMax API 接入细节和成本控制

---

## 6. 后续步骤

1. **技术验证** — 快速搭建 MiniMax 多模态 + TTS 原型
2. **MVP 范围确定** — 砍到最小可用功能集
3. **技术架构设计** — 数据库 Schema、API 设计
4. **开发计划** — 里程碑划分和排期

---

*文档由 Friday 与 Alexander 头脑风暴共创* 🪐
